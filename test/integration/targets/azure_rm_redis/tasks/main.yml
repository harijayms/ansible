---
- name: test my new module
  connection: local
  hosts: localhost

  tasks:
    - name: Create redis cache
      azure_rm_redis:
        resource_group_name: azureredistest
        name: azureredis
        location: westus
        tags:
          testing: testing
          delete: never
        sku_name: Premium
        sku_family: C
        sku_capacity: 1
        enable_nonssl_port: true
        shard_count: 2
        redis_configuration:
          maxmemory-policy: allkeys-lru
        subnet_id: /subscriptions/subid/resourceGroups/rg2/providers/Microsoft.Network/virtualNetworks/network1/subnets/subnet1
        static_ip: 192.168.0.5

  